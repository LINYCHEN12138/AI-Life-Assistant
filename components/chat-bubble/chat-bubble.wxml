<!--components/chat-bubble/chat-bubble.wxml-->
<view class="chat-bubble {{type}} {{contentType}}">
  <view class="bubble-avatar" wx:if="{{type === 'ai'}}">
    <text class="avatar-text">AI</text>
  </view>
  
  <view class="bubble-content">
    <!-- æ–‡æœ¬æ¶ˆæ¯ -->
    <text class="bubble-text" user-select wx:if="{{contentType === 'text'}}">{{content}}</text>
    
    <!-- è¯­éŸ³æ¶ˆæ¯ -->
    <view class="bubble-voice" wx:if="{{contentType === 'voice'}}">
      <view class="voice-icon" bindtap="playVoice">
        <text class="voice-symbol">ğŸ”Š</text>
      </view>
      <text class="voice-duration">{{duration}}s</text>
    </view>
    
    <!-- æ—¥ç¨‹å¡ç‰‡ -->
    <view class="bubble-schedule" wx:if="{{contentType === 'schedule'}}">
      <view class="schedule-header">
        <text class="schedule-title">ğŸ“… æ—¥ç¨‹æé†’</text>
      </view>
      <view class="schedule-body">
        <text class="schedule-name">{{content.title}}</text>
        <text class="schedule-time">{{content.time}}</text>
        <text class="schedule-desc">{{content.description}}</text>
      </view>
      <view class="schedule-actions" wx:if="{{!isConfirmed}}">
        <button class="action-btn confirm" bindtap="confirmSchedule">ç¡®è®¤</button>
        <button class="action-btn modify" bindtap="modifySchedule">ä¿®æ”¹</button>
      </view>
      <view class="card-confirmed" wx:else>
        <icon type="success_no_circle" size="16" color="#07c160"></icon>
        <text class="confirmed-text">å·²æ·»åŠ è‡³æ—¥ç¨‹</text>
      </view>
    </view>
    
    <!-- ä»»åŠ¡å¡ç‰‡ -->
    <view class="bubble-task" wx:if="{{contentType === 'task'}}">
      <view class="task-header">
        <text class="task-title">ğŸ“ ä»»åŠ¡å»ºè®®</text>
      </view>
      <view class="task-body">
        <text class="task-name">{{content.title}}</text>
        <text class="task-desc">{{content.description}}</text>
        <view class="task-meta">
          <text class="task-priority">ä¼˜å…ˆçº§: {{content.priority}}</text>
          <text class="task-deadline">æˆªæ­¢: {{content.deadline}}</text>
        </view>
      </view>
      <view class="task-actions" wx:if="{{!isConfirmed}}">
        <button class="action-btn confirm" bindtap="confirmTask">åˆ›å»º</button>
        <button class="action-btn modify" bindtap="modifyTask">ä¿®æ”¹</button>
      </view>
      <view class="card-confirmed" wx:else>
        <icon type="success_no_circle" size="16" color="#07c160"></icon>
        <text class="confirmed-text">å·²æ·»åŠ è‡³ä»»åŠ¡</text>
      </view>
    </view>
    
    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="bubble-loading" wx:if="{{loading}}">
      <view class="loading-dots">
        <view class="loading-dot"></view>
        <view class="loading-dot"></view>
        <view class="loading-dot"></view>
      </view>
    </view>
  </view>
  
  <view class="bubble-avatar user-avatar" wx:if="{{type === 'user'}}">
    <text class="avatar-text">æˆ‘</text>
  </view>
</view> 