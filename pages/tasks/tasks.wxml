<!--pages/tasks/tasks.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨æ“ä½œæ  -->
  <view class="header-section">
    <text class="header-title">æˆ‘çš„ä»»åŠ¡</text>
    <view class="add-task-btn" bindtap="navigateToCreate">
      <text class="add-icon">+</text>
      <text>åˆ›å»ºä»»åŠ¡</text>
    </view>
  </view>

  <!-- ä»»åŠ¡ç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="stat-item">
      <text class="stat-value">{{summary.pending}}</text>
      <text class="stat-label">å¾…åŠ</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{summary.completed}}</text>
      <text class="stat-label">å·²å®Œæˆ</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{summary.total}}</text>
      <text class="stat-label">å…¨éƒ¨ä»»åŠ¡</text>
    </view>
  </view>

  <!-- ç­›é€‰å’Œæ’åº -->
  <view class="filter-section">
    <view class="filter-tabs">
      <view class="filter-tab {{currentFilter === 'pending' ? 'active' : ''}}" bindtap="setFilter" data-filter="pending">å¾…åŠ</view>
      <view class="filter-tab {{currentFilter === 'completed' ? 'active' : ''}}" bindtap="setFilter" data-filter="completed">å·²å®Œæˆ</view>
      <view class="filter-tab {{currentFilter === 'all' ? 'active' : ''}}" bindtap="setFilter" data-filter="all">å…¨éƒ¨</view>
    </view>
  </view>

  <!-- ä»»åŠ¡åˆ—è¡¨ -->
  <scroll-view class="task-list-container" scroll-y="true">
    <block wx:if="{{filteredTasks.length > 0}}">
      <view 
        class="task-item {{item.isCompleted ? 'completed' : ''}} priority-{{item.priority || 'medium'}}" 
        wx:for="{{filteredTasks}}" 
        wx:key="id"
        bindtap="navigateToEdit"
        data-task-id="{{item.id}}"
      >
        <view class="task-check" catchtap="toggleComplete" data-task-id="{{item.id}}">
          <view class="checkbox {{item.isCompleted ? 'checked' : ''}}"></view>
        </view>
        <view class="task-content">
          <text class="task-title">{{item.title}}</text>
          <text class="task-deadline" wx:if="{{item.deadline}}">æˆªæ­¢ï¼š{{item.deadline}}</text>
        </view>
        <view class="task-priority-indicator"></view>
      </view>
    </block>
    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">æš‚æ— ä»»åŠ¡</text>
      <text class="empty-desc">ç‚¹å‡»å³ä¸Šè§’åˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡å§</text>
    </view>
  </scroll-view>
</view> 